<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–¢–µ–º—ã –ø–æ —Ä—É—Å—Å–∫–æ–º—É —è–∑—ã–∫—É</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      font-family: Georgia, serif;
      background: linear-gradient(to bottom, #fdf5e6, #f8f1e0);
      color: #3b2a26;
      line-height: 1.6;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #e2ddd4;
      padding: 20px 40px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      user-select: none;
    }

    header img { height: 70px; width: auto; object-fit: contain; }

    nav a { margin: 0 15px; text-decoration: none; color: #3b2a26; font-size: 16px; }

    .welcome { text-align: center; padding: 50px 20px 30px; }
    .start-text {
      display: inline-block; padding: 10px 20px; background-color: #e0d3c2;
      border-radius: 5px; font-weight: bold; margin-bottom: 30px; font-size: 20px;
    }
    .divider { width: 80%; margin: 0 auto; border-top: 1px solid #d3c5b2; }

    .topics-container { padding: 40px 20px; max-width: 1200px; margin: 0 auto; }
    .topics-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; }

    .topic-block {
      background: #f4ede3; border-radius: 10px; padding: 15px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1); display: flex; flex-direction: column;
    }
    .topic-button {
      background: #e9ded1; border: none; padding: 15px 20px; font-size: 18px;
      font-weight: 600; border-radius: 8px; cursor: pointer; width: 100%; text-align: left;
      transition: background .3s ease;
    }
    .topic-button:hover { background: #d8cdc0; }

    .topic-list {
      list-style: none; margin: 10px 0 0; padding: 0 10px; background: rgba(255,255,255,.7);
      border-radius: 8px; max-height: 0; overflow: hidden; transition: max-height .4s ease, padding .3s ease; font-size: 16px;
    }
    .topic-list.open { max-height: 1000px; padding: 10px; }
    .topic-list li { padding: 8px 0; border-bottom: 1px solid #e0d3c2; }
    .topic-list li:last-child { border-bottom: none; }
    .topic-list li a { text-decoration: none; color: #3b2a26; }
    .topic-list li strong { display: block; margin-bottom: 6px; color: #8b5a2b; font-size: 18px; }

    @media (max-width:1024px){ .topics-grid{ grid-template-columns: repeat(2,1fr);} }
    @media (max-width:768px){ .topics-grid{ grid-template-columns: 1fr;} }

    /* —á–∞—Ç-–≤–∏–¥–∂–µ—Ç */
    .chat-fab{ position:fixed; right:20px; bottom:20px; width:64px; height:64px; border-radius:50%; border:none; cursor:pointer; background:#a69f91; color:#2f2e2a; box-shadow:0 8px 20px rgba(166,159,145,.5); display:grid; place-items:center; transition:transform .2s, box-shadow .2s, background .2s; z-index:1000;}
    .chat-fab:hover{ transform:translateY(-2px) scale(1.02); background:#8f897e; box-shadow:0 12px 28px rgba(143,137,126,.6);}
    .chat-fab svg{ width:28px; height:28px; }

    .chat-panel{ position:fixed; right:20px; bottom:96px; width:360px; max-width:calc(100vw - 40px); max-height:70vh; display:none; flex-direction:column; background:#f4ede3; color:#3b2a26; border-radius:16px; box-shadow:0 16px 40px rgba(0,0,0,.15); overflow:hidden; z-index:1000;}
    .chat-header{ display:flex; align-items:center; justify-content:space-between; padding:12px 14px; background:#e2ddd4; border-bottom:1px solid rgba(0,0,0,.05);}
    .chat-title{ font-weight:700; font-size:18px;}
    .chat-controls{ display:flex; gap:8px;}
    .chat-icon-btn{ background:transparent; border:none; cursor:pointer; padding:6px; border-radius:8px;}
    .chat-icon-btn:hover{ background:rgba(0,0,0,.06);}

    .chat-body{ padding:12px; overflow-y:auto; flex:1; display:flex; flex-direction:column; gap:10px; }
    .message{ max-width:85%; border-radius:16px; padding:10px 12px; line-height:1.5; box-shadow:0 1px 2px rgba(0,0,0,.05); }
    .message.bot{ background:#fff; align-self:flex-start; }
    .message.user{ background:#e9e4da; align-self:flex-end; }

    .chips{ display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
    .chip{ background:#fff; border:1px solid rgba(0,0,0,.08); padding:6px 10px; border-radius:999px; cursor:pointer; font-size:14px; }
    .chip:hover{ background:#f7f4ee; }

    .typing{ display:inline-block; width:1em; text-align:left;}
    .typing span{ display:inline-block; width:.2em; height:.2em; margin:0 .05em; background:#9b9486; border-radius:50%; animation:blink 1s infinite; }
    .typing span:nth-child(2){ animation-delay:.2s;} .typing span:nth-child(3){ animation-delay:.4s;}
    @keyframes blink{ 0%,80%,100%{opacity:.2} 40%{opacity:1} }

    .chat-input-row{ display:flex; align-items:center; gap:8px; padding:10px; background:#e2ddd4; border-top:1px solid rgba(0,0,0,.05);}
    .chat-input{ flex:1; font-size:16px; padding:10px 12px; border-radius:12px; border:1px solid rgba(0,0,0,.12); background:#fff;}
    .send-btn{ background:#a69f91; color:#2f2e2a; border:none; border-radius:12px; padding:10px 14px; font-weight:700; cursor:pointer;}
    .send-btn:hover{ background:#8f897e;}
    @media (max-width:480px){ .chat-panel{ right:10px; left:10px; width:auto; bottom:90px; } }
  </style>
</head>
<body>

  <header>
    <div style="display:flex; align-items:center;">
      <img src="aitu-logo-3.png" alt="–õ–æ–≥–æ—Ç–∏–ø –ê–ò–¢–£" />
    </div>
    <nav>
      <a href="proect.html" style="font-size:20px;font-weight:bold;text-decoration:none;color:#4b473e;position:relative;padding-bottom:4px;">–û –ø—Ä–æ–µ–∫—Ç–µ</a>
    </nav>
  </header>

  <section class="welcome">
    <h1 style="font-size: 40px;">–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –≤–∞—Å –Ω–∞ —Å–∞–π—Ç–µ –ø–æ —Ä—É—Å—Å–∫–æ–º—É —è–∑—ã–∫—É</h1>
    <p style="font-size:25px; text-align:center; margin:20px 0; color:#3b2a26;">
      –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—Ç–∞–ª –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –∏–∑—É—á–∞—é—â–∏—Ö —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –Ω–∞—É–∫–∏ –∏ –º–µ–∂–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞—Ä–Ω—ã—Ö –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–π
    </p>
    <div class="start-text">–ù–∞—á–∞—Ç—å –∏–∑—É—á–µ–Ω–∏–µ —Ç–µ–º</div>
    <div class="divider"></div>
  </section>

  <section class="topics-container">
    <div class="topics-grid">

      <!-- –ü–µ—Ä–≤—ã–π —Ä—è–¥ -->
      <div class="topic-block">
        <button class="topic-button" onclick="toggleList(this)">üé≠ –ö—É–ª—å—Ç—É—Ä–∞ –∏ –æ–±—â–µ—Å—Ç–≤–æ</button>
        <ul class="topic-list">
          <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</strong></li>
          <li><a href="1.1.1.html">1.1.1.–î–∏–∞–ª–æ–≥ –∫—É–ª—å—Ç—É—Ä –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ. –§—Ä–∞–∑–µ–æ–ª–æ–≥–∏–∑–º—ã. –†–∏—Ç–æ—Ä–∏–∫–∞.</a></li>
          <li><a href="1.1.2.html">1.1.2. –¢–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –∏ –µ—ë –≤–∏–¥—ã. –ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –ª–µ–∫—Å–∏–∫–∞.</a></li>
          <li><a href="1.1.3.html">1.1.3. –¢–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å –≤ –º–∏—Ä–µ. –ü—É–±–ª–∏—Ü–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –∂–∞–Ω—Ä—ã.</a></li>
          <li><a href="1.1.4.html">1.1.4. –õ–µ–∫—Å–∏–∫–∞ –ø—É–±–ª–∏—Ü–∏—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å—Ç–∏–ª—è</a></li>
          <li><a href="1.1.5.html">1.1.5. –¢–æ–ª–µ—Ä–∞–Ω—Ç–Ω–∞—è –ª–∏—á–Ω–æ—Å—Ç—å. –°—Ç–∏–ª–∏—Å—Ç–∏–∫–∞ —Ä–µ—á–∏.</a></li>
        </ul>
      </div>

      <div class="topic-block">
        <button class="topic-button" onclick="toggleList(this)">üî¨ –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–∞—É–∫–∏</button>
        <ul class="topic-list">
          <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</strong></li>
          <li><a href="2.1.1.html">2.1.1.–§–∏–∑–∏–∫–∞ –∏ –ø—Ä–∏—Ä–æ–¥–∞. –°–ø–µ—Ü–ª–µ–∫—Å–∏–∫–∞.</a></li>
          <li><a href="2.1.2.html">2.1.2. –ì–ª–∞–≥–æ–ª—ã –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ–≥–æ –≤–∏–¥–∞.</a></li>
          <li><a href="2.1.3.html">2.1.3.  –§–∏–∑–∏–∫–∞ –≤ –∂–∏–∑–Ω–∏. –ü—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –ø—Ä–µ–¥–ª–æ–≥–∏.</a></li>
          <li><a href="2.1.4.html">2.1.4. –û—Ç–∫—Ä—ã—Ç–∏—è –∫–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–∏—Ö —É—á—ë–Ω—ã—Ö. –¢–µ—Ä–º–∏–Ω—ã, –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–µ –≥–ª–∞–≥–æ–ª—ã.</a></li>
          <li><a href="2.1.5.html">2.1.5.  –°–≤–æ–∏ –æ—Ç–∫—Ä—ã—Ç–∏—è. –û–±–æ—Å–æ–±–ª–µ–Ω–Ω—ã–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è.</a></li>
          <li><a href="2.1.6.html">2.1.6. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –∏ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è.</a></li>
        </ul>
      </div>

      <div class="topic-block">
        <button class="topic-button" onclick="toggleList(this)">üíª –¶–∏—Ñ—Ä–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</button>
        <ul class="topic-list">
          <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</strong></li>
          <li><a href="3.1.1.html">3.1.1.  –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ. –û–±–æ—Å–æ–±–ª–µ–Ω–Ω—ã–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.</a></li>
          <li><a href="3.1.2.html">3.1.2. –¶–∏—Ñ—Ä–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –≤ –Ω–∞—à–µ–π –∂–∏–∑–Ω–∏</a></li>
          <li><a href="3.1.3.html">3.1.3. –ó–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è —Å –æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º–∏ –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞–º–∏</a></li>
          <li><a href="3.1.4.html">3.1.4. ¬´–¶–∏—Ñ—Ä–æ–≤–æ–π –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω¬ª.</a></li>
          <li><a href="3.1.5.html">3.1.5. –ó–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è —Å —Å—É—â–µ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Å –ø—Ä–µ–¥–ª–æ–≥–∞–º–∏</a></li>
        </ul>
      </div>

      <!-- –í—Ç–æ—Ä–æ–π —Ä—è–¥ -->
      <div class="topic-block">
        <button class="topic-button" onclick="toggleList(this)">üß™ –ë–∏–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏</button>
        <ul class="topic-list">
          <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</strong></li>
          <li><a href="4.1.1.html">4.1.1. –ë–∏–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∏ —ç—Ç–∏–∫–∞.</a></li>
          <li><a href="4.1.2.html">4.1.2. –ó–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è –≤ —Å–ª–æ–∂–Ω–æ—Å–æ—á–∏–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö</a></li>
          <li><a href="4.1.3.html">4.1.3. –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.–ó–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è </a></li>
          <li><a href="4.1.4.html">4.1.4. –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏ –≤ –±–∏–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏.</a></li>
          <li><a href="4.1.5.html">4.1.5. –ó–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è –≤ —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏</a></li>
          <li><a href="4.1.6.html">4.1.6. –ó–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è –≤ –Ω–µ–ø–æ–ª–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö</a></li>
        </ul>
      </div>

      <div class="topic-block">
        <button class="topic-button" onclick="toggleList(this)">‚ö° –≠–Ω–µ—Ä–≥–µ—Ç–∏–∫–∞</button>
        <ul class="topic-list">
          <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</strong></li>
          <li><a href="5.1.1.html">5.1.1. –ü—Ä–∏—á–∏–Ω—ã –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏.</a></li>
          <li><a href="5.1.2.html">5.1.2. –†–∞–∑–≤–∏—Ç–∏–µ —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏ –≤ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–µ.</a></li>
          <li><a href="5.1.3.html">5.1.3. –ü—É—Ç–∏ —Ä–µ—à–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–µ—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º.</a></li>
          <li><a href="5.1.4.html">5.1.4. –õ–µ–∫—Å–∏–∫–∞ —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–∏.</a></li>
          <li><a href="5.1.5.html">5.1.5. –ó–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è –≤ —Å–ª–æ–∂–Ω–æ–ø–æ–¥—á–∏–Ω–µ–Ω–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö —Å –ø—Ä–∏–¥–∞—Ç–æ—á–Ω–æ–π –∏–∑—ä—è—Å–Ω–∏—Ç–µ–ª—å–Ω–æ–π.</a></li>
        </ul>
      </div>

      <div class="topic-block">
        <button class="topic-button" onclick="toggleList(this)">üåç –≠–∫–æ–ª–æ–≥–∏—è</button>
        <ul class="topic-list">
          <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</strong></li>
          <li><a href="6.1.1.html">6.1.1. –≠–∫–æ–ª–æ–≥–∏—è –∏ –æ—Ö—Ä–∞–Ω–∞ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã.</a></li>
          <li><a href="6.1.2.html">6.1.2. –ü—Ä–æ–±–ª–µ–º—ã –∑–∞–≥—Ä—è–∑–Ω–µ–Ω–∏—è.</a></li>
          <li><a href="6.1.3.html">6.1.3. –ú–µ—Ç–æ–¥—ã –∑–∞—â–∏—Ç—ã –ø—Ä–∏—Ä–æ–¥—ã.</a></li>
          <li><a href="6.1.4.html">6.1.4. –≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã.</a></li>
          <li><a href="6.1.5.html">6.1.5. –≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ.</a></li>
        </ul>
      </div>

      <!-- –¢—Ä–µ—Ç–∏–π —Ä—è–¥ -->
      <div class="topic-block">
        <button class="topic-button" onclick="toggleList(this)">üë• –ú–æ–ª–æ–¥—ë–∂—å –∏ –æ–±—â–µ—Å—Ç–≤–æ</button>
        <ul class="topic-list">
          <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</strong></li>
          <li><a href="7.1.1.html">7.1.1. –ú–æ–ª–æ–¥–µ–∂–Ω–∞—è –∫—É–ª—å—Ç—É—Ä–∞ –≤ –æ–±—â–µ—Å—Ç–≤–µ.</a></li>
          <li><a href="7.1.2.html">7.1.2. –°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ ‚Äì –∫–∞—á–µ—Å—Ç–≤–æ –º–æ–ª–æ–¥–µ–∂–∏.</a></li>
          <li><a href="7.1.3.html">7.1.3. –ü—Ä–æ–±–ª–µ–º—ã –ø–æ–∫–æ–ª–µ–Ω–∏—è Z.</a></li>
          <li><a href="7.1.4.html">7.1.4. –ö–∞–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–µ–±—è –≤ –∂–∏–∑–Ω–∏.</a></li>
          <li><a href="7.1.5.html">7.1.5. –†–µ—á–µ–≤–∞—è –∫—É–ª—å—Ç—É—Ä–∞ –º–æ–ª–æ–¥–µ–∂–∏.</a></li>
          <li><a href="7.1.6.html">7.1.6. –ü—Ä–æ–±–ª–µ–º–∞ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏.</a></li>
          <li><a href="7.1.7.html">7.1.7. –ü—Ä–æ—Ñ–µ—Å—Å–∏–∏ —Ç–µ—Ö–Ω–∏–∫–æ-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è.</a></li>
        </ul>
      </div>

      <div class="topic-block">
        <button class="topic-button" onclick="toggleList(this)">üí∞ –≠–∫–æ–Ω–æ–º–∏–∫–∞</button>
        <ul class="topic-list">
          <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è.</strong></li>
          <li><a href="8.1.1.html">8.1.1. –ß—Ç–æ —Ç–∞–∫–æ–µ —ç–∫–æ–Ω–æ–º–∏–∫–∞?</a></li>
          <li><a href="8.1.2.html">8.1.2. –ó–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è —Å –æ–±–æ—Å–æ–±–ª–µ–Ω–Ω—ã–º–∏ —á–ª–µ–Ω–∞–º–∏.</a></li>
          <li><a href="8.1.3.html">8.1.3. –¶–∏—Ñ—Ä–æ–≤–∞—è —ç–∫–æ–Ω–æ–º–∏–∫–∞ –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω–∞.</a></li>
          <li><a href="8.1.4.html">8.1.4. –£–º–Ω—ã–π –¥–æ–º: —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å –∏ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤–∞.</a></li>
        </ul>
      </div>

      <div class="topic-block">
        <button class="topic-button" onclick="toggleList(this)">üìö –≠—Ç–∏–∫–∞ –∏ –Ω–∞—É–∫–∞</button>
        <ul class="topic-list">
          <li><strong>–í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è</strong></li>
          <li><a href="9.1.1.html">9.1.1. –≠—Ç–∏–∫–∞ –Ω–∞—É–∫–∏. –û–±—â–µ–Ω–∞—É—á–Ω–∞—è –ª–µ–∫—Å–∏–∫–∞.</a></li>
          <li><a href="9.1.2.html">9.1.2. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ç–µ—Ä–º–∏–Ω—ã.</a></li>
          <li><a href="9.1.3.html">9.1.3. –≠—Ç–∏–∫–∞ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è.</a></li>
          <li><a href="9.1.4.html">9.1.4. –ó–Ω–∞–∫–∏ –ø—Ä–µ–ø–∏–Ω–∞–Ω–∏—è –≤ —Å–ª–æ–∂–Ω—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è—Ö.</a></li>
          <li><a href="9.1.5.html">9.1.5. –≠—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∏–±–æ—Ä–≥–æ–≤.</a></li>
        </ul>
      </div>

    </div>
  </section>

  <script>
    function toggleList(button) {
      const allLists = document.querySelectorAll('.topic-list');
      const currentList = button.nextElementSibling;
      const isAlreadyOpen = currentList.classList.contains('open');
      allLists.forEach(list => { if (list !== currentList) list.classList.remove('open'); });
      if (isAlreadyOpen) currentList.classList.remove('open'); else currentList.classList.add('open');
    }
  </script>

  <!-- –∫–Ω–æ–ø–∫–∞ –∏ –ø–∞–Ω–µ–ª—å —á–∞—Ç–∞ -->
  <button class="chat-fab" id="chatFab" aria-label="–û—Ç–∫—Ä—ã—Ç—å —á–∞—Ç" title="–ü–æ–º–æ—â–Ω–∏–∫ –ø–æ —Ç–µ–º–∞–º">
    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
      <path d="M4 5.5C4 4.12 5.12 3 6.5 3h11C18.88 3 20 4.12 20 5.5v7c0 1.38-1.12 2.5-2.5 2.5H9l-4 4v-4.5C4 13.62 4 5.5 4 5.5Z" stroke="#2f2e2a" stroke-width="1.5"/>
      <circle cx="9" cy="8.5" r="1" fill="#2f2e2a"/>
      <circle cx="12.5" cy="8.5" r="1" fill="#2f2e2a"/>
      <circle cx="16" cy="8.5" r="1" fill="#2f2e2a"/>
    </svg>
  </button>

  <aside class="chat-panel" id="chatPanel" aria-live="polite" aria-label="–ß–∞—Ç –ø–æ–º–æ—â–Ω–∏–∫–∞">
    <div class="chat-header">
      <div class="chat-title">–ü–æ–º–æ—â–Ω–∏–∫ –ø–æ —Ç–µ–º–∞–º</div>
      <div class="chat-controls">
        <button class="chat-icon-btn" id="minimizeBtn" title="–°–≤–µ—Ä–Ω—É—Ç—å" aria-label="–°–≤–µ—Ä–Ω—É—Ç—å">‚àí</button>
        <button class="chat-icon-btn" id="closeBtn" title="–ó–∞–∫—Ä—ã—Ç—å" aria-label="–ó–∞–∫—Ä—ã—Ç—å">‚úï</button>
      </div>
    </div>
    <div class="chat-body" id="chatBody"></div>
    <div class="chat-input-row">
      <input id="chatInput" class="chat-input" type="text" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ: ¬´–∑–∞–ø—è—Ç—ã–µ –ø—Ä–∏ —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏‚Ä¶¬ª" />
      <button id="sendBtn" class="send-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </div>
  </aside>
  <script>
    /* ==== –£–ú–ù–´–ô –ü–û–ò–°–ö: TF-IDF + cosine + —Å–∏–Ω–æ–Ω–∏–º—ã + –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–ü–ï–ß–ê–¢–û–ö ==== */
    
    const fab = document.getElementById('chatFab');
    const panel = document.getElementById('chatPanel');
    const bodyEl = document.getElementById('chatBody');
    const inputEl = document.getElementById('chatInput');
    const sendBtn = document.getElementById('sendBtn');
    const minimizeBtn = document.getElementById('minimizeBtn');
    const closeBtn = document.getElementById('closeBtn');
    
    const openChat = ()=>{ panel.style.display='flex'; inputEl.focus(); if(!bodyEl.dataset.greeted){ greet(); bodyEl.dataset.greeted='1'; } };
    const closeChat = ()=> panel.style.display='none';
    fab.addEventListener('click',()=> panel.style.display==='flex'?closeChat():openChat());
    minimizeBtn.addEventListener('click',closeChat);
    closeBtn.addEventListener('click',closeChat);
    document.addEventListener('keydown',e=>{ if(e.key==='Escape') closeChat(); });
    
    function addMessage(role, html){
      const msg=document.createElement('div');
      msg.className=`message ${role}`;
      msg.innerHTML=html;
      bodyEl.appendChild(msg);
      bodyEl.scrollTop=bodyEl.scrollHeight;
      return msg;
    }
    function addTyping(){ return addMessage('bot', `<span class="typing"><span></span><span></span><span></span></span>`); }
    function escapeHtml(str){ return str.replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;','\'':'&#39;' }[m])); }
    
    function greet(){
      addMessage('bot', `
        <div><b>–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ!</b> –í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É –∏–ª–∏ 1‚Äì2 –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤–∞ ‚Äî –ø–æ–∫–∞–∂—É —Å–∞–º—ã–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã.</div>
        <div style="margin-top:6px;font-size:14px;opacity:.9;">
          –ü—Ä–∏–º–µ—Ä—ã: ¬´–∑–∞–ø—è—Ç—ã–µ –ø—Ä–∏ —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏¬ª, ¬´–æ–±–æ—Å–æ–±–ª–µ–Ω–Ω—ã–µ —á–ª–µ–Ω—ã¬ª, ¬´—Ç–µ–º—ã –ø–æ —Ñ–∏–∑–∏–∫–µ¬ª.
        </div>
      `);
    }
    
    /* ---------- —Å–æ–±–∏—Ä–∞–µ–º —Ç–µ–º—ã ---------- */
    function collectTopics() {
      const topics = [];
      document.querySelectorAll('.topic-block').forEach(block => {
        const section = (block.querySelector('.topic-button')?.textContent || '').trim();
        block.querySelectorAll('.topic-list a').forEach(a => {
          topics.push({ title: (a.textContent || '').trim(), url: a.getAttribute('href'), section });
        });
      });
      return topics;
    }
    
    /* ---------- –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è / —Ç–æ–∫–µ–Ω—ã / —Å—Ç–µ–º–º–∏–Ω–≥ ---------- */
    const RU_STOP = new Set(['–∏','–≤','–≤–æ','–Ω–∞','–∫','–ø–æ','–∑–∞','–æ—Ç','–¥–æ','–æ','–æ–±','—Å–æ','—Å','–±–µ–∑','–¥–ª—è','–∫–∞–∫','—á—Ç–æ','—ç—Ç–æ','–∏–∑','–Ω–∞–¥','–ø–æ–¥','–ø—Ä–∏','–ø—Ä–æ','–º–µ–∂–¥—É','–∂–µ','–ª–∏','–±—ã','–Ω–µ','–Ω–∏','–∞','–Ω–æ','–∏–ª–∏','–∂–µ','—Ç–æ']);
    function normalize(text){ return (text||'').toLowerCase().replace(/[—ë]/g,'–µ').replace(/[^a-z–∞-—è0-9\s]+/g,' ').replace(/\s+/g,' ').trim(); }
    function ruStem(w){
      return w
        .replace(/(–∏—è–º–∏|—è–º–∏|–∞–º–∏|–∏—è—Ö|—è—Ö|–µ–≤|–æ–≤|–∏—è|—å—è|–∞–∏|–µ–∏|–∏–∏|–æ–π|–µ–π|–∞–º|—è–º|–∞—Ö|—è—Ö|–∏—é|—å—é|–∏—è–º|–∏—è—Ö)$/,'')
        .replace(/(—ã–º–∏|–∏–º–∏|–µ–≥–æ|–æ–≥–æ|–µ–º—É|–æ–º—É|–µ–µ|–æ–µ|–∞—è|—è—è|–æ—é|–µ—é)$/,'')
        .replace(/(–µ—à—å|–µ–º|–µ—Ç|—é—Ç|—É—Ç|–∏–ª|–∏–ª–∞|–∏–ª–∏|–∞—Ç—å|—è—Ç—å|–∏—Ç—å|—ã—Ç—å|–∞—Ç—å)$/,'')
        .replace(/(–Ω–∏–µ|–Ω–∏—è|–Ω–∏—é|–Ω–∏–µ–º|–Ω–∏–∏)$/,'')
        .replace(/(–æ—Å—Ç—å|–æ—Å—Ç|–æ—Å—Ç–µ–π|–æ—Å—Ç—è–º|–æ—Å—Ç—è–º–∏|–æ—Å—Ç—è—Ö)$/,'')
        .replace(/(–∫–∞–º–∏|–∫–æ–π|–∫–∏–π|–∫–∞—è|–∫–∏–µ)$/,'')
        .replace(/(—ã–µ|–∏–π|—ã–π|–æ–π|–∏–µ|—ã—Ö|–∏—Ö)$/,'');
    }
    function tokenize(text){
      const raw = normalize(text).split(' ').filter(Boolean);
      const out = [];
      for(const w of raw){ if(RU_STOP.has(w)) continue; const s=ruStem(w); if(s) out.push(s); }
      return out;
    }
    
    /* ---------- —Å–∏–Ω–æ–Ω–∏–º—ã ---------- */
    const SYN = {
      '–∑–∞–ø—è—Ç': ['–ø—É–Ω–∫—Ç—É–∞—Ü','–æ–±–æ—Å–æ–±–ª','—Ç–∏—Ä–µ','–∫–∞–≤—ã—á','—Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω'],
      '–ø—É–Ω–∫—Ç—É–∞—Ü': ['–∑–∞–ø—è—Ç','—Ç–∏—Ä–µ','–∫–∞–≤—ã—á','–æ–±–æ—Å–æ–±–ª','—Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω'],
      '–æ–±–æ—Å–æ–±–ª': ['–∑–∞–ø—è—Ç','–ø—É–Ω–∫—Ç—É–∞—Ü'],
      '—Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω': ['–∫–∞–≤—ã—á','–ø—É–Ω–∫—Ç—É–∞—Ü','–∑–∞–ø—è—Ç'],
      '–∫–∞–≤—ã—á': ['—Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω','–ø—É–Ω–∫—Ç—É–∞—Ü'],
      '—Ç–∏—Ä–µ': ['–ø—É–Ω–∫—Ç—É–∞—Ü'],
      '–æ—Ä—Ñ–æ–≥—Ä–∞—Ñ': ['–ø—Ä–∞–≤–æ–ø–∏—Å','—Å–ª–æ–≤–∞—Ä–Ω','–±–µ–∑—É–¥–∞—Ä–Ω'],
      '–ª–µ–∫—Å–∏–∫': ['–∑–Ω–∞—á–µ–Ω','—Å–∏–Ω–æ–Ω–∏–º','–∞–Ω—Ç–æ–Ω–∏–º','—Ç–µ—Ä–º–∏–Ω'],
      '—Å–∏–Ω—Ç–∞–∫—Å': ['–ø—Ä–µ–¥–ª–æ–∂–µ–Ω','—Å–ª–æ–≤–æ—Å–æ—á–µ—Ç–∞–Ω','—á–ª–µ–Ω—ã'],
      '–º–æ—Ä—Ñ–æ–ª–æ–≥': ['—á–∞—Å—Ç','—Å–∫–ª–æ–Ω–µ–Ω','—Å–ø—Ä—è–∂–µ–Ω'],
      '—Ñ–∏–∑–∏–∫': ['–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω','–Ω–∞—É–∫'],
      '–±–∏–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥': ['–±–∏–æ—Ç–µ—Ö','–±–∏–æ'],  // ‚Üê –¥–æ–±–∞–≤–∏–ª –¥–ª—è ¬´–±–∏–æ—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏¬ª
      '–∫—É–ª—å—Ç—É—Ä': ['–æ–±—â–µ—Å—Ç–≤','—Ç–æ–ª–µ—Ä–∞–Ω—Ç'],
      '—ç–Ω–µ—Ä–≥–µ—Ç–∏–∫': ['—ç–Ω–µ—Ä–≥–∏','–≥–ª–æ–±–∞–ª—å','–ø—Ä–æ–±–ª–µ–º'],
      '—ç–∫–æ–ª–æ–≥': ['–ø—Ä–∏—Ä–æ–¥','–æ–∫—Ä—É–∂–∞—é—â','–∑–∞–≥—Ä—è–∑–Ω–µ–Ω'],
      '—Ç–µ—Ö–Ω–æ–ª–æ–≥': ['—Ü–∏—Ñ—Ä–æ–≤','–∏—Ç','–∫–æ–º–ø—å—é—Ç–µ—Ä']
    };
    function expandTokens(tokens){
      const extra = new Set();
      for(const t of tokens){ if(SYN[t]) SYN[t].forEach(x=>extra.add(x)); }
      return Array.from(new Set([...tokens, ...extra]));
    }
    
    /* ---------- –õ–ï–í–ï–ù–®–¢–ï–ô–ù –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—á–∞—Ç–æ–∫ ---------- */
    function lev(a,b){
      const m=a.length,n=b.length; const dp=Array.from({length:m+1},()=>Array(n+1).fill(0));
      for(let i=0;i<=m;i++) dp[i][0]=i; for(let j=0;j<=n;j++) dp[0][j]=j;
      for(let i=1;i<=m;i++) for(let j=1;j<=n;j++){
        const cost = a[i-1]===b[j-1]?0:1;
        dp[i][j]=Math.min(dp[i-1][j]+1, dp[i][j-1]+1, dp[i-1][j-1]+cost);
      }
      return dp[m][n];
    }
    function correctTokens(tokens, vocab){
      const corrected = [];
      for(const t of tokens){
        if(vocab.has(t)){ corrected.push(t); continue; }
        let best = null, bestD = Infinity;
        for(const v of vocab){
          if (Math.abs(v.length - t.length) > 2) continue; // –º–µ–ª–∫–∏–π —Ñ–∏–ª—å—Ç—Ä
          const d = lev(t, v);
          if(d < bestD){ bestD=d; best=v; if(d===1) break; }
        }
        corrected.push(bestD<=2 ? best : t);
      }
      return corrected;
    }
    
    /* ---------- —Å—Ç—Ä–æ–∏–º TF-IDF + —Å–ª–æ–≤–∞—Ä—å —Ç–æ–∫–µ–Ω–æ–≤ ---------- */
    function buildStore(items){
      const docs = items.map((it,i)=>{
        const titleNorm = normalize(it.title);
        const sectionNorm = normalize(it.section);
        const toks = tokenize(it.title + ' ' + it.section);
        return { id:i, ...it, titleNorm, sectionNorm, toks };
      });
    
      // —Å–ª–æ–≤–∞—Ä—å –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏ –æ–ø–µ—á–∞—Ç–æ–∫
      const vocab = new Set();
      docs.forEach(d => d.toks.forEach(t => vocab.add(t)));
    
      const df = new Map();
      docs.forEach(d=>{
        const uniq = new Set(d.toks);
        uniq.forEach(t=> df.set(t, (df.get(t)||0)+1 ));
      });
      const N = docs.length;
      const idf = new Map();
      df.forEach((dfv,t)=> idf.set(t, Math.log(1 + N / (dfv||1)) ));
    
      const vectors = docs.map(d=>{
        const tf = new Map();
        d.toks.forEach(t=> tf.set(t, (tf.get(t)||0)+1 ));
        const vec = new Map(); let norm = 0;
        tf.forEach((freq,t)=>{ const w = freq * (idf.get(t)||0); vec.set(t,w); norm += w*w; });
        return { vec, norm: Math.sqrt(norm) || 1 };
      });
    
      return { docs, idf, vectors, vocab, N };
    }
    
    /* ---------- —Å–∫–æ—Ä–∏–Ω–≥ –∑–∞–ø—Ä–æ—Å–∞ (—Å –æ–ø–µ—á–∞—Ç–∫–∞–º–∏) ---------- */
    function buildQueryVector(tokens, idf){
      const tf = new Map(); tokens.forEach(t=> tf.set(t,(tf.get(t)||0)+1));
      let norm=0; const vec=new Map();
      tf.forEach((freq,t)=>{ const w=freq*(idf.get(t)||0); vec.set(t,w); norm+=w*w; });
      return { vec, norm: Math.sqrt(norm)||1 };
    }
    
    function scoreQuery(rawQuery, store){
      const rawNorm = normalize(rawQuery);
      let qTokens = expandTokens(tokenize(rawQuery));
    
      // –µ—Å–ª–∏ –ø—É—Å—Ç–æ ‚Äî –ø—Ä–æ–±—É–µ–º –∏–∑ rawNorm
      if(!qTokens.length) qTokens = expandTokens(tokenize(rawNorm));
    
      // –∫–æ—Ä—Ä–µ–∫—Ü–∏—è –æ–ø–µ—á–∞—Ç–æ–∫ –ø–æ —Å–ª–æ–≤–∞—Ä—é
      const qTokensFixed = correctTokens(qTokens, store.vocab);
    
      // —Å–æ–±–∏—Ä–∞–µ–º –≤–µ–∫—Ç–æ—Ä
      const {vec:qv, norm:qnorm} = (()=>{ const r = buildQueryVector(qTokensFixed, store.idf); return {vec:r.vec, norm:r.norm}; })();
    
      const results = [];
      for(let i=0;i<store.docs.length;i++){
        const d=store.docs[i]; const dv=store.vectors[i];
        let dot=0; qv.forEach((qw,t)=>{ const dw=dv.vec.get(t)||0; if(dw) dot += qw*dw; });
        let score = dot / (dv.norm * qnorm);
    
        // –±—É—Å—Ç—ã –∑–∞ —Ñ—Ä–∞–∑—ã/—Å–ª–æ–≤–∞ –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ
        if (d.titleNorm.includes(rawNorm)) score += 0.60;
        const words = rawNorm.split(' ').filter(Boolean);
        if (words.length>=2 && words.every(w => d.titleNorm.includes(w))) score += 0.25;
    
        const hitsInTitle = expandTokens(tokenize(d.title)).filter(t => qTokensFixed.includes(t)).length;
        if (hitsInTitle) score += 0.08 * hitsInTitle;
    
        // —Å–ø–µ—Ü: –ø—É–Ω–∫—Ç—É–∞—Ü–∏–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã ‚Äî –ø–æ–¥—Ä–µ–∑–∞–µ–º –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ–µ
        const isPunct = /(–∑–∞–ø—è—Ç|–ø—É–Ω–∫—Ç—É–∞—Ü|–æ–±–æ—Å–æ–±–ª|—Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω|–∫–∞–≤—ã—á|—Ç–∏—Ä–µ)/.test(rawNorm);
        if (isPunct) {
          const ok = /(–∑–Ω–∞–∫–∏|–ø—É–Ω–∫—Ç—É–∞—Ü|–æ–±–æ—Å–æ–±–ª|—Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω|–∫–∞–≤—ã—á|—Ç–∏—Ä–µ|–∑–∞–ø—è—Ç)/.test(d.titleNorm);
          if (!ok) score *= 0.35; else score += 0.15;
        }
    
        results.push({ doc:d, score });
      }
    
      // –µ—Å–ª–∏ —Å–æ–≤—Å–µ–º –ø—É—Å—Ç–æ ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ–º —Ç–æ–ø –∏–∑ ¬´–ø–æ—Ö–æ–∂–∏—Ö¬ª –ø–æ —Å–µ–∫—Ü–∏–∏
      let ranked = results.filter(r=> r.score>0.01).sort((a,b)=> b.score-a.score).slice(0,10);
      return { ranked, qTokensFixed };
    }
    
    /* ---------- –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –∏ —Ä–µ–Ω–¥–µ—Ä ---------- */
    function highlight(title, query){
      const toks = Array.from(new Set(expandTokens(tokenize(query)))).sort((a,b)=>b.length-a.length);
      if(!toks.length) return escapeHtml(title);
      let html = title;
      for(const t of toks){
        const re = new RegExp(`(${t}[–∞-—èa-z]*)`,'ig');
        html = html.replace(re, '<mark style="background:#fff0b3;">$1</mark>');
      }
      return html;
    }
    
    function render(list, query, correctedNote){
      if(!list.length){
        return `<div>–ù–µ –Ω–∞—à–ª–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π. –£—Ç–æ—á–Ω–∏—Ç–µ –∑–∞–ø—Ä–æ—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä: ¬´–∑–∞–ø—è—Ç—ã–µ –ø—Ä–∏ —Ü–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏¬ª, ¬´–æ–±–æ—Å–æ–±–ª–µ–Ω–Ω—ã–µ —á–ª–µ–Ω—ã¬ª).</div>`;
      }
      const items = list.map(({doc, score})=>{
        const why = score>=0.55 ? '—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ —Ñ—Ä–∞–∑–µ/—Ç–µ—Ä–º–∏–Ω–∞–º'
                 : score>=0.35 ? '–æ—á–µ–Ω—å –±–ª–∏–∑–∫–æ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º'
                 : '–ø–æ—Ö–æ–∂–µ –ø–æ —Å–º—ã—Å–ª—É';
        return `<li><a href="${doc.url}">${highlight(doc.title, query)}</a>
                  <div style="font-size:13px;opacity:.8;">${why}</div></li>`;
      }).join('');
      return `<div>
        ${correctedNote?`<div style="font-size:13px;opacity:.85;margin-bottom:6px;">${correctedNote}</div>`:''}
        <div style="font-weight:700;margin-bottom:6px;">–ü–æ—Ö–æ–∂–∏–µ —Ç–µ–º—ã:</div>
        <ol style="padding-left:18px;">${items}</ol>
      </div>`;
    }
    
    /* ---------- –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª ---------- */
    let STORE=null;
    function ensureStore(){ if(!STORE) STORE = buildStore(collectTopics()); }
    
    async function handleSend(){
      ensureStore();
      const q = inputEl.value.trim(); if(!q) return;
      addMessage('user', escapeHtml(q)); inputEl.value='';
      const typing = addTyping();
    
      const { ranked, qTokensFixed } = scoreQuery(q, STORE);
    
      // –µ—Å–ª–∏ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—á–∞—Ç–æ–∫ ‚Äî –ø–æ–∫–∞–∂–µ–º, –∫–∞–∫ –ø–æ–Ω—è–ª–∏
      let correctedNote = '';
      const orig = expandTokens(tokenize(q)).join(' ');
      const fixed = qTokensFixed.join(' ');
      if (orig && fixed && orig !== fixed) {
        correctedNote = `–ü–æ–Ω—è–ª–∞ –∑–∞–ø—Ä–æ—Å –∫–∞–∫: <b>${escapeHtml(fixed)}</b> (–∏—Å–ø—Ä–∞–≤–∏–ª–∞ –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ–ø–µ—á–∞—Ç–∫–∏).`;
      }
    
      const html = render(ranked, q, correctedNote);
    
      typing.remove();
      addMessage('bot', html);
    }
    
    sendBtn.addEventListener('click', handleSend);
    inputEl.addEventListener('keydown', e=>{ if(e.key==='Enter' && !e.shiftKey){ e.preventDefault(); handleSend(); } });
    document.addEventListener('DOMContentLoaded', ()=>{ ensureStore(); });
    </script>
    

</body>
</html>
